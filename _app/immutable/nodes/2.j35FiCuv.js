import{s as x,n as w,o as S,d as C,e as I}from"../chunks/scheduler.BnLxJkeY.js";import{S as M,i as k,e as A,c as E,d as b,g,m as j,j as q}from"../chunks/index.BG6j-tbb.js";const X=!0,W=Object.freeze(Object.defineProperty({__proto__:null,prerender:X},Symbol.toStringTag,{value:"Module"}));function Y(c){let t;return{c(){t=A("canvas"),this.h()},l(i){t=E(i,"CANVAS",{id:!0}),b(t).forEach(g),this.h()},h(){j(t,"id","canvas")},m(i,h){q(i,t,h),c[1](t)},p:w,i:w,o:w,d(i){i&&g(t),c[1](null)}}}function $(c,t,i){const h=crypto.randomUUID(),d=new Map,y=24/1e3;let a,l,r=null;const u=()=>{const s={windowId:h,posX:window.screenX,posY:window.screenY,width:window.innerWidth,height:window.innerHeight,time:Date.now()};a==null||a.postMessage(s),d.forEach((e,o)=>{(Date.now()-e.time)/1e3>2*y&&d.delete(o)});const v=[...d.values(),s];if(!r)return;const n=r.getContext("2d");if(!n)return;n.canvas.width=s.width,n.canvas.height=s.height;const f=v.map(e=>({id:e.windowId,x:e.posX+e.width/2-window.screenX,y:e.posY+e.height/2-window.screenY}));n.clearRect(0,0,r.width,r.height),n.lineWidth=8,f.forEach(e=>{f.forEach(o=>{if(e.id===o.id)return;const p=e.id.slice(0,6),D=o.id.slice(0,6),m=n.createLinearGradient(e.x,e.y,o.x,o.y);m.addColorStop(0,`#${p}`),m.addColorStop(1,`#${D}`),n.strokeStyle=m,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.stroke()})}),l=requestAnimationFrame(u)};S(async()=>{a=new BroadcastChannel("channel"),a.onmessage=s=>{d.set(s.data.windowId,s.data)},l=requestAnimationFrame(u)}),C(()=>{a==null||a.close(),l&&cancelAnimationFrame(l)});function _(s){I[s?"unshift":"push"](()=>{r=s,i(0,r)})}return[r,_]}class O extends M{constructor(t){super(),k(this,t,$,Y,x,{})}}export{O as component,W as universal};
