import{s as C,n as u,o as D,d as I,e as k}from"../chunks/scheduler.BnLxJkeY.js";import{S as A,i as E,e as b,c as j,d as q,g,m as M,j as X}from"../chunks/index.BG6j-tbb.js";const Y=!0,O=Object.freeze(Object.defineProperty({__proto__:null,prerender:Y},Symbol.toStringTag,{value:"Module"}));function $(c){let t;return{c(){t=b("canvas"),this.h()},l(o){t=j(o,"CANVAS",{id:!0}),q(t).forEach(g),this.h()},h(){M(t,"id","canvas")},m(o,w){X(o,t,w),c[1](t)},p:u,i:u,o:u,d(o){o&&g(t),c[1](null)}}}function F(c,t,o){const w=crypto.randomUUID(),d=new Map,y=24/1e3;let s,l,i=null;const p=r=>{const h={windowId:w,posX:window.screenX,posY:window.screenY,width:window.innerWidth,height:window.innerHeight,time:Date.now()};s==null||s.postMessage(h),d.forEach((e,a)=>{(Date.now()-e.time)/1e3>2*y&&d.delete(a)});const v=[...d.values(),h];if(!i)return;const n=i.getContext("2d");if(!n)return;n.canvas.width=h.width,n.canvas.height=h.height;const f=v.map(e=>({id:e.windowId,x:e.posX+e.width/2-window.screenX,y:e.posY+e.height/2-window.screenY}));n.clearRect(0,0,i.width,i.height),n.lineWidth=8,f.forEach(e=>{f.forEach(a=>{if(e.id===a.id)return;const x=e.id.slice(0,6),S=a.id.slice(0,6),m=n.createLinearGradient(e.x,e.y,a.x,a.y);m.addColorStop(0,`#${x}`),m.addColorStop(1,`#${S}`),n.strokeStyle=m,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(a.x,a.y),n.stroke()})}),l=requestAnimationFrame(p)};D(async()=>{s=new BroadcastChannel("channel"),s.onmessage=r=>{d.set(r.data.windowId,r.data)},l=requestAnimationFrame(p)}),I(()=>{s==null||s.close(),l&&cancelAnimationFrame(l)});function _(r){k[r?"unshift":"push"](()=>{i=r,o(0,i)})}return[i,_]}class U extends A{constructor(t){super(),E(this,t,F,$,C,{})}}export{U as component,O as universal};
